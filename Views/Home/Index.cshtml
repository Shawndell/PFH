@{
    ViewData["Title"] = "Welcome";
}
<div class="text-center">
    <h1 class="display-4">Welcome</h1>
</div>
<div class="jumbotron">
    <h1 class="display-3">Project For Healing, Inc.</h1>
    <p class="lead">
        Project for Healing, Inc offers counseling services in four locations, psychoeducation classes, behavioral case management,
        psychiatric support services, medication management and group treatment.
        Two licensed social workers, specially trained in refugee mental health care, provide over 500 sessions annually
    </p>
    <p class="lead">Our aim is for all North Florida refugees tohave healthy, happy lives..</p>
    <hr class="my-4">
    <p>Project For Healing has collaborations between many refugee resettlement agencies, you can look at the map or click the resource tab to find the right one for you.</p>
    <p class="lead">
        <a class="btn btn-primary btn-lg" href="#" role="button">Resource</a>
        <a class="btn btn-primary btn-lg" href="https://projectforhealing.org/about/" role="button">Learn more about PFH</a>

    </p>
</div>
<div id="mapDiv" class="container" style="display: inline-block; height: 30%; width: 30%;"></div>

<div class="container" id='map' style="height: 550px;"></div>
<div id="legend"><h3>Legend</h3></div>


@section Scripts    {
    <script type="text/javascript">
        function initMap() {
            $(document).ready(function () {
                var map, infoWindow;

                map = new google.maps.Map(document.getElementById('map'), {
                    center: { lat: -34.397, lng: 150.644 },
                    zoom: 11
                });
                infoWindow = new google.maps.InfoWindow;

                // Try HTML5 geolocation.

                if (!navigator.geolocation) {
                    handleLocationError(false, infoWindow, map.getCenter());
                    return;
                }

                navigator.geolocation.getCurrentPosition(function (position) {
                    var pos = {
                        lat: position.coords.latitude,
                        lng: position.coords.longitude
                    };

                    infoWindow.setPosition(pos);
                    infoWindow.setContent('Location found.');
                    infoWindow.open(map);
                    map.setCenter(pos);
                }, function () {
                    handleLocationError(true, infoWindow, map.getCenter());
                });
              

                function handleLocationError(browserHasGeolocation, infoWindow, pos) {
                    infoWindow.setPosition(pos);
                    infoWindow.setContent(browserHasGeolocation ?
                        'Error: The Geolocation service failed.' :
                        'Error: Your browser doesn\'t support geolocation.');
                    infoWindow.open(map);

                };

                
                var icons = {
                    housing: {
                        name: 'Housing',
                        icon: 'fas fa-home'
                    },
                    esol: {
                        name: 'ESOL',
                         icon: 'fas fa-language'
                    },
                    volunteering: {
                        name: 'Volunteering',
                         icon: 'fas fa-people-carry'
                    },
                    disablility: {
                        name: 'Disablility Services',
                          icon: 'fab fa-accessible-icon'
                    },
                     pfh: {
                        name: 'Project For Healing',
                         icon: 'fab fa-hire-a-helper'
                    },
                     children: {
                        name: 'Children',
                         icon: 'fas fa-baby-carriage'
                    },
                    employment: {
                        name: 'Employment',
                         icon: 'fab fa-accessible-icon'
                    },
                    medical: {
                        name: 'Medical',
                         icon: 'fas fa-ambulance'
                    },
                    dental: {
                        name: 'Dental Health',
                        icon: 'fas fa-tooth'
                    },
                    mental: {
                        name: 'Mental Health',
                         icon: 'fas fa-brain'
                    }
                };

                var features = [
                    {
                        position: new google.maps.LatLng(30.332630, -81.664250),
                        type: 'housing'
                    }, {
                        position: new google.maps.LatLng(30.328930, -81.655520),
                        type: 'esol'
                    }, {
                        position: new google.maps.LatLng(30.352270, -81.652700),
                        type: 'volunteering'
                    }, {
                        position: new google.maps.LatLng(30.260620, -81.623280),
                        type: 'pfh'
                    },{
                        position: new google.maps.LatLng(30.282250, -81.601870),
                        type: 'children'
                    },
                    {
                        postion: new google.maps.LatLng(30.266280, -81.618320),
                        type: 'employment'
                    }

                ];

                features.forEach(function(feature) {
                    var marker = new google.maps.Marker({
                        position: feature.position,
                        icon: icons[feature.type].icon,
                        map: map,
                        title: icons[feature.type].name
                    });
                });

                var legend = document.getElementById('legend');
                    for (var key in icons) {
                    var type = icons[key];
                    var name = type.name;
                    var icon = type.icon;
                    var div = document.createElement('div');
                    div.innerHTML = '<i class=" ' + icon + '"></i>' + name;
                    legend.appendChild(div);
                }

                map.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(legend);
            });
        }
    </script>
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAHRMZHAXLXAuowcxyVA_fHwxRDqaqjX8k&callback=initMap"></script>
}






