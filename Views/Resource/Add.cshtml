@model ProjectForHealing.ViewModels.AddResourceViewModel

@{
    ViewData["Title"] = "View";
}
    <div class="container middlebody">
        <h1>Create New Resource</h1>

        <div class="container">
            <div class="col-md-4">
                <form enctype="multipart/form-data" asp-controller="Resource" asp-action="Add" method="post">

                    @*<div asp-validation-summary="All"></div>*@

                    <div class="row">
                        <div class="col">
                            <div class="form-group">
                                <label asp-for="OrgName" class="control-label"></label>
                                <input asp-for="OrgName" class="form-control" />
                                <span asp-validation-for="OrgName" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="col">
                            <div class=" form-group">
                                <label asp-for="OrgNumber" class="control-label"></label>
                                <input asp-for="OrgNumber" class="form-control" />
                                <span asp-validation-for="OrgNumber" class="text-danger"></span>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col">
                            <div class="form-group">
                                <label asp-for="OrgEmail" class="control-label"></label>
                                <input asp-for="OrgEmail" class="form-control" />
                                <span asp-validation-for="OrgEmail" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group">
                                <label asp-for="OrgAddress" class="control-label"></label>
                                <input asp-for="OrgAddress" class="form-control" oninput="window.getCoordinates();" />
                                <span asp-validation-for="OrgAddress" class="text-danger"></span>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group">
                            <label asp-for="OrgCity" class="control-label"></label>
                            <input asp-for="OrgCity" class="form-control" />
                            <span asp-validation-for="OrgCity" class="text-danger"></span>
                        </div>
                        <div class="form-group">
                            <label asp-for="OrgZip" class="control-label"></label>
                            <input asp-for="OrgZip" class="form-control" />
                            <span asp-validation-for="OrgZip" class="text-danger"></span>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group">
                            <label asp-for="OrgSte" class="control-label"></label>
                            <input asp-for="OrgSte" class="form-control" />
                            <span asp-validation-for="OrgSte" class="text-danger"></span>
                        </div>
                        <div class="form-group">
                            <label asp-for="OrgDescription" class="control-label"></label>
                            <textarea asp-for="OrgDescription" class="form-control"> </textarea>>
                            <span asp-validation-for="OrgDescription" class="text-danger"></span>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group">
                            <label asp-for="WebsiteUrl" class="control-label"></label>
                            <input asp-for="WebsiteUrl" class="form-control" />
                            <span asp-validation-for="WebsiteUrl" class="text-danger"></span>
                        </div>
                    </div>


                    <h4>What type of services do you provide?</h4>
                    <input type="checkbox" name="ResourceTypes" value="medical" onclick="return ValidateSelection();">Medical<br>
                    <input type="checkbox" name="ResourceTypes" value="financial" onclick="return ValidateSelection();">Financial<br>
                    <input type="checkbox" name="ResourceTypes" value="housing" onclick="return ValidateSelection();">housing<br>
                    <input type="checkbox" name="ResourceTypes" value="food" onclick="return ValidateSelection();">Food<br>
                    <input type="checkbox" name="ResourceTypes" value="clothing" onclick="return ValidateSelection();">Clothing<br>
                    <input type="checkbox" name="ResourceTypes" value="employment" onclick="return ValidateSelection();">Employment<br>
                    <input type="checkbox" name="ResourceTypes" value="disability" onclick="return ValidateSelection();">Disabilities<br>
                    <input type="checkbox" name="ResourceTypes" value="education" onclick="return ValidateSelection();">Education<br>
                    <input type="checkbox" name="ResourceTypes" value="trafficking" onclick="return ValidateSelection();">Trafficking<br>
                    <input type="checkbox" name="ResourceTypes" value="socialsecurity" onclick="return ValidateSelection();">Social Security<br>
                    <input type="checkbox" name="ResourceTypes" value="counseling" onclick="return ValidateSelection();">Counseling<br>
                    <input type="checkbox" name="ResourceTypes" value="children" onclick="return ValidateSelection();">Children<br>
                    <input type="checkbox" name="ResourceTypes" value="dental" onclick="return ValidateSelection();">Dental<br>
                    <input type="checkbox" name="ResourceTypes" value="volunteering" onclick="return ValidateSelection();">Volunteering<br>
                    <div class="form-group">
                        <div class="custom-file">
                            <input asp-for="UploadedFile" class="form-control custom-file-input" type="file" name="UploadedFile" />
                            <label class="custom-file-label">Choose File....</label>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group">
                            <label asp-for="lat" class="control-label"></label>
                            <input asp-for="lat" class="form-control" readonly />

                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group">
                            <label asp-for="lng" class="control-label"></label>
                            <input asp-for="lng" class="form-control" readonly />

                        </div>
                    </div>

                    <div class="form-group">
                        <input type="submit" value="Submit Form" class="btn btn-primary" onclick="return window.getCoordinates();" />
                    </div>
                    @section Scripts{
                        <script type="text/javascript">
                            $(document).ready(function () {
                                //selecting html element with custom file input class
                                //changing text when file name changes
                                $('.custom-file-input').on("change", function () {
                                    //  var fileName = $(this).val.().split("\\").pop();
                                    var fileName = $('input[type=file]').val().split('\\').pop();
                                    $(this).next('.custom-file-label').html(fileName);
                                })
                            });

                            function initMap() {
                                // Google maps are now initialized.


                                geocoder = new google.maps.Geocoder();

                                window.getCoordinates = function () {
                                    var address = document.getElementById('OrgAddress').value;
                                    var coordinates;
                                    geocoder.geocode({ 'address': address }, function (results, status) {
                                        if (status == 'OK') {
                                            /* map.setCenter(results[0].geometry.location);
                                             var marker = new google.maps.Marker({
                                                 map: map,
                                                 position: results[0].geometry.location
                                             });*/
                                            coordinates = results[0].geometry.location;
                                            // [coords_obj.lat.Scopes.b, coords_obj.lat.Scopes.a];
                                            // console.log(coordinates.lat(), coordinates.lng());
                                            document.getElementById('lat').value = coordinates.lat();
                                            document.getElementById('lng').value = coordinates.lng();
                                        } //else {
                                        // alert('Geocode was not successful for the following reason: ' + status);
                                        // }
                                    });
                                }

                            }
                            function ValidateSelection() {
                                var checkboxes = new Array(3);
                                checkboxes = document.getElementsByName("ResourceTypes");
                                var numberOfCheckedItems = 0;
                                for (var i = 0; i < checkboxes.length; i++) {
                                    if (checkboxes[i].checked)
                                        numberOfCheckedItems++;
                                }
                                if (numberOfCheckedItems > 3) {
                                    alert("You can't select more than 3 Resources!");
                                    return false;
                                }
                            }
                        </script>
                        <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAHRMZHAXLXAuowcxyVA_fHwxRDqaqjX8k&callback=initMap"
                                async defer></script>
                    }
                </form>
            </div>
        </div>

        <div>
            <a asp-action="Index">Back to List</a>
        </div>
        </div>


